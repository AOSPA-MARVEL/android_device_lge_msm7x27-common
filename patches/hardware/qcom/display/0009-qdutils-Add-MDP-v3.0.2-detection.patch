From e8d26a547ec7fc9643bf59d3dccd4d57edd8abb2 Mon Sep 17 00:00:00 2001
From: Andreas Schneider <asn@cryptomilk.org>
Date: Tue, 28 Aug 2012 10:21:09 +0200
Subject: [PATCH] qdutils: Add MDP v3.0.2 detection.

Change-Id: I22ad1f7fe3c2c03518e192b44f8f0f7018d8ff34
---
 libqdutils/mdp_version.cpp |    2 +-
 libqdutils/mdp_version.h   |    1 +
 2 files changed, 2 insertions(+), 1 deletion(-)

diff --git a/libqdutils/mdp_version.cpp b/libqdutils/mdp_version.cpp
index 78ca52f..05761d9 100644
--- a/libqdutils/mdp_version.cpp
+++ b/libqdutils/mdp_version.cpp
@@ -63,7 +63,7 @@ MDPVersion::MDPVersion()
             mdp_version = MDP_V_UNKNOWN;
         }
         int len = strlen("msmfbXX_");
-        if (mdp_version == MDP_V3_0_3)
+        if (mdp_version == MDP_V3_0_2 || mdp_version == MDP_V3_0_3)
             len++;
         panel_type = fb_finfo.id[len];
 
diff --git a/libqdutils/mdp_version.h b/libqdutils/mdp_version.h
index 9137cd4..ebe6132 100644
--- a/libqdutils/mdp_version.h
+++ b/libqdutils/mdp_version.h
@@ -42,6 +42,7 @@ enum mdp_version {
     MDP_V_UNKNOWN = 0,
     MDP_V2_2    = 220,
     MDP_V3_0    = 300,
+    MDP_V3_0_2  = 302,
     MDP_V3_0_3  = 303,
     MDP_V3_1    = 310,
     MDP_V4_0    = 400,
-- 
1.7.10.4

